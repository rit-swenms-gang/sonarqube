<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DefaultIssue.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">sonarqube</a> &gt; <a href="index.source.html" class="el_package">org.sonar.core.issue</a> &gt; <span class="el_source">DefaultIssue.java</span></div><h1>DefaultIssue.java</h1><pre class="source lang-java linenums">/*
 * SonarQube
 * Copyright (C) 2009-2025 SonarSource SA
 * mailto:info AT sonarsource DOT com
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 */
package org.sonar.core.issue;

import com.google.common.base.Preconditions;
import com.google.common.base.Strings;
import com.google.common.collect.ImmutableList;
import com.google.common.collect.ImmutableSet;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.Date;
import java.util.LinkedHashMap;
import java.util.LinkedHashSet;
import java.util.List;
import java.util.Map;
import java.util.Objects;
import java.util.Optional;
import java.util.Set;
import java.util.stream.Collectors;
import javax.annotation.CheckForNull;
import javax.annotation.Nullable;
import org.apache.commons.lang3.StringUtils;
import org.apache.commons.lang3.builder.ToStringBuilder;
import org.apache.commons.lang3.builder.ToStringStyle;
import org.sonar.api.issue.Issue;
import org.sonar.api.issue.IssueStatus;
import org.sonar.api.issue.impact.SoftwareQuality;
import org.sonar.api.rule.RuleKey;
import org.sonar.api.rule.Severity;
import org.sonar.api.rules.CleanCodeAttribute;
import org.sonar.api.utils.Duration;
import org.sonar.core.issue.tracking.Trackable;
import org.sonar.core.rule.RuleType;

import static org.sonar.api.utils.DateUtils.truncateToSeconds;

<span class="fc" id="L56">public class DefaultIssue implements Issue, Trackable {</span>

<span class="fc" id="L58">  private String key = null;</span>
<span class="fc" id="L59">  private RuleType type = null;</span>
<span class="fc" id="L60">  private String componentUuid = null;</span>
<span class="fc" id="L61">  private String componentKey = null;</span>

<span class="fc" id="L63">  private String projectUuid = null;</span>
<span class="fc" id="L64">  private String projectKey = null;</span>

<span class="fc" id="L66">  private RuleKey ruleKey = null;</span>
<span class="fc" id="L67">  private String language = null;</span>
<span class="fc" id="L68">  private String severity = null;</span>
<span class="fc" id="L69">  private boolean manualSeverity = false;</span>
<span class="fc" id="L70">  private String message = null;</span>
<span class="fc" id="L71">  private Object messageFormattings = null;</span>
<span class="fc" id="L72">  private Integer line = null;</span>
<span class="fc" id="L73">  private Double gap = null;</span>
<span class="fc" id="L74">  private Duration effort = null;</span>
<span class="fc" id="L75">  private String status = null;</span>
<span class="fc" id="L76">  private String resolution = null;</span>
<span class="fc" id="L77">  private String assigneeUuid = null;</span>
<span class="fc" id="L78">  private String assigneeLogin = null;</span>
<span class="fc" id="L79">  private String checksum = null;</span>
<span class="fc" id="L80">  private String authorLogin = null;</span>
<span class="fc" id="L81">  private List&lt;DefaultIssueComment&gt; comments = null;</span>
<span class="fc" id="L82">  private Set&lt;String&gt; tags = null;</span>
<span class="fc" id="L83">  private Set&lt;String&gt; codeVariants = null;</span>
<span class="fc" id="L84">  private boolean prioritizedRule = false;</span>
<span class="fc" id="L85">  private boolean fromSonarQubeUpdate = false;</span>
  // temporarily an Object as long as DefaultIssue is used by sonar-batch
<span class="fc" id="L87">  private Object locations = null;</span>

<span class="fc" id="L89">  private boolean isFromExternalRuleEngine = false;</span>

  // FUNCTIONAL DATES
<span class="fc" id="L92">  private Date creationDate = null;</span>
<span class="fc" id="L93">  private Date updateDate = null;</span>
<span class="fc" id="L94">  private Date closeDate = null;</span>

  // Current changes
<span class="fc" id="L97">  private FieldDiffs currentChange = null;</span>

  // all changes
  // -- contains only current change (if any) on CE side unless reopening a closed issue or copying issue from base branch
  // when analyzing a branch from the first time
<span class="fc" id="L102">  private List&lt;FieldDiffs&gt; changes = null;</span>

  // true if the issue did not exist in the previous scan.
<span class="fc" id="L105">  private boolean isNew = true;</span>

  // true if the issue is on a changed line on a branch using the reference branch new code strategy
<span class="fc" id="L108">  private boolean isOnChangedLine = false;</span>

  // true if the issue is being copied between branch
<span class="fc" id="L111">  private boolean isCopied = false;</span>

  // true if any of the locations have changed (ignoring hashes)
<span class="fc" id="L114">  private boolean locationsChanged = false;</span>

  // True if the issue did exist in the previous scan but not in the current one. That means
  // that this issue should be closed.
<span class="fc" id="L118">  private boolean beingClosed = false;</span>

<span class="fc" id="L120">  private boolean onDisabledRule = false;</span>

  // true if some fields have been changed since the previous scan
<span class="fc" id="L123">  private boolean isChanged = false;</span>

  // true if notifications have to be sent
<span class="fc" id="L126">  private boolean sendNotifications = false;</span>

  // Date when issue was loaded from db (only when isNew=false)
<span class="fc" id="L129">  private Long selectedAt = null;</span>

<span class="fc" id="L131">  private boolean quickFixAvailable = false;</span>
<span class="fc" id="L132">  private boolean isNewCodeReferenceIssue = false;</span>

  // true if the issue is no longer new in its branch
<span class="fc" id="L135">  private boolean isNoLongerNewCodeReferenceIssue = false;</span>

<span class="fc" id="L137">  private String ruleDescriptionContextKey = null;</span>

<span class="fc" id="L139">  private String anticipatedTransitionUuid = null;</span>

<span class="fc" id="L141">  private final Map&lt;SoftwareQuality, DefaultImpact&gt; impacts = new LinkedHashMap&lt;&gt;();</span>
<span class="fc" id="L142">  private CleanCodeAttribute cleanCodeAttribute = null;</span>

  @Override
  public String key() {
<span class="fc" id="L146">    return key;</span>
  }

  public DefaultIssue setKey(String key) {
<span class="fc" id="L150">    this.key = key;</span>
<span class="fc" id="L151">    return this;</span>
  }

  public RuleType type() {
<span class="fc" id="L155">    return type;</span>
  }

  public Map&lt;SoftwareQuality, org.sonar.api.issue.impact.Severity&gt; impacts() {
<span class="fc" id="L159">    return impacts.values().stream().collect(Collectors.toMap(DefaultImpact::softwareQuality, DefaultImpact::severity));</span>
  }

  public Set&lt;DefaultImpact&gt; getImpacts() {
<span class="fc" id="L163">    return new LinkedHashSet&lt;&gt;(this.impacts.values());</span>
  }

  public DefaultIssue replaceImpacts(Map&lt;SoftwareQuality, org.sonar.api.issue.impact.Severity&gt; impacts) {
<span class="fc" id="L167">    this.impacts.clear();</span>
<span class="fc" id="L168">    this.impacts.putAll(impacts.entrySet().stream().collect(Collectors.toMap(Map.Entry::getKey, e -&gt; new DefaultImpact(e.getKey(), e.getValue(), false))));</span>
<span class="fc" id="L169">    return this;</span>
  }

  public DefaultIssue addImpact(SoftwareQuality softwareQuality, org.sonar.api.issue.impact.Severity severity) {
<span class="fc" id="L173">    impacts.put(softwareQuality, new DefaultImpact(softwareQuality, severity, false));</span>
<span class="fc" id="L174">    return this;</span>
  }

  public DefaultIssue addImpact(SoftwareQuality softwareQuality, org.sonar.api.issue.impact.Severity severity, boolean manualSeverity) {
<span class="fc" id="L178">    impacts.put(softwareQuality, new DefaultImpact(softwareQuality, severity, manualSeverity));</span>
<span class="fc" id="L179">    return this;</span>
  }

  public DefaultIssue setType(RuleType type) {
<span class="fc" id="L183">    this.type = type;</span>
<span class="fc" id="L184">    return this;</span>
  }

  /**
   * Can be null on Views or Devs
   */
  @Override
  @CheckForNull
  public String componentUuid() {
<span class="fc" id="L193">    return componentUuid;</span>
  }

  public DefaultIssue setComponentUuid(@Nullable String s) {
<span class="fc" id="L197">    this.componentUuid = s;</span>
<span class="fc" id="L198">    return this;</span>
  }

  @Override
  public String componentKey() {
<span class="fc" id="L203">    return componentKey;</span>
  }

  public DefaultIssue setComponentKey(String s) {
<span class="fc" id="L207">    this.componentKey = s;</span>
<span class="fc" id="L208">    return this;</span>
  }

  @Override
  public String projectUuid() {
<span class="fc" id="L213">    return projectUuid;</span>
  }

  public DefaultIssue setProjectUuid(String s) {
<span class="fc" id="L217">    this.projectUuid = s;</span>
<span class="fc" id="L218">    return this;</span>
  }

  @Override
  public String projectKey() {
<span class="fc" id="L223">    return projectKey;</span>
  }

  public DefaultIssue setProjectKey(String projectKey) {
<span class="fc" id="L227">    this.projectKey = projectKey;</span>
<span class="fc" id="L228">    return this;</span>
  }

  @Override
  public RuleKey ruleKey() {
<span class="fc" id="L233">    return ruleKey;</span>
  }

  public DefaultIssue setRuleKey(RuleKey k) {
<span class="fc" id="L237">    this.ruleKey = k;</span>
<span class="fc" id="L238">    return this;</span>
  }

  @Override
  @CheckForNull
  public String language() {
<span class="fc" id="L244">    return language;</span>
  }

  public DefaultIssue setLanguage(@Nullable String l) {
<span class="fc" id="L248">    this.language = l;</span>
<span class="fc" id="L249">    return this;</span>
  }

  @Override
  public String severity() {
<span class="fc" id="L254">    return severity;</span>
  }

  public DefaultIssue setSeverity(@Nullable String s) {
<span class="fc bfc" id="L258" title="All 4 branches covered.">    Preconditions.checkArgument(s == null || Severity.ALL.contains(s), &quot;Not a valid severity: &quot; + s);</span>
<span class="fc" id="L259">    this.severity = s;</span>
<span class="fc" id="L260">    return this;</span>
  }

  public boolean manualSeverity() {
<span class="fc" id="L264">    return manualSeverity;</span>
  }

  public DefaultIssue setManualSeverity(boolean b) {
<span class="fc" id="L268">    this.manualSeverity = b;</span>
<span class="fc" id="L269">    return this;</span>
  }

  public boolean isFromExternalRuleEngine() {
<span class="fc" id="L273">    return isFromExternalRuleEngine;</span>
  }

  public DefaultIssue setIsFromExternalRuleEngine(boolean isFromExternalRuleEngine) {
<span class="fc" id="L277">    this.isFromExternalRuleEngine = isFromExternalRuleEngine;</span>
<span class="fc" id="L278">    return this;</span>
  }

  @Override
  @CheckForNull
  public String message() {
<span class="fc" id="L284">    return message;</span>
  }

  public DefaultIssue setMessage(@Nullable String s) {
<span class="fc" id="L288">    this.message = StringUtils.abbreviate(s, MESSAGE_MAX_SIZE);</span>
<span class="fc" id="L289">    return this;</span>
  }

  @CheckForNull
  public &lt;T&gt; T getMessageFormattings() {
<span class="fc" id="L294">    return (T) messageFormattings;</span>
  }

  public DefaultIssue setMessageFormattings(@Nullable Object messageFormattings) {
<span class="fc" id="L298">    this.messageFormattings = messageFormattings;</span>
<span class="fc" id="L299">    return this;</span>
  }

  @Override
  @CheckForNull
  public Integer line() {
<span class="fc" id="L305">    return line;</span>
  }

  public DefaultIssue setLine(@Nullable Integer l) {
<span class="fc bfc" id="L309" title="All 4 branches covered.">    Preconditions.checkArgument(l == null || l &gt; 0, &quot;Line must be null or greater than zero (got %s)&quot;, l);</span>
<span class="fc" id="L310">    this.line = l;</span>
<span class="fc" id="L311">    return this;</span>
  }

  @Override
  @CheckForNull
  public Double gap() {
<span class="fc" id="L317">    return gap;</span>
  }

  public DefaultIssue setGap(@Nullable Double d) {
<span class="fc bfc" id="L321" title="All 4 branches covered.">    Preconditions.checkArgument(d == null || d &gt;= 0, &quot;Gap must be greater than or equal 0 (got %s)&quot;, d);</span>
<span class="fc" id="L322">    this.gap = d;</span>
<span class="fc" id="L323">    return this;</span>
  }

  /**
   * Elapsed time to fix the issue
   */
  @Override
  @CheckForNull
  public Duration effort() {
<span class="fc" id="L332">    return effort;</span>
  }

  @CheckForNull
  public Long effortInMinutes() {
<span class="fc bfc" id="L337" title="All 2 branches covered.">    return effort != null ? effort.toMinutes() : null;</span>
  }

  public DefaultIssue setEffort(@Nullable Duration t) {
<span class="fc" id="L341">    this.effort = t;</span>
<span class="fc" id="L342">    return this;</span>
  }

  @Override
  public String status() {
<span class="fc" id="L347">    return status;</span>
  }

  public DefaultIssue setStatus(String s) {
<span class="fc bfc" id="L351" title="All 2 branches covered.">    Preconditions.checkArgument(!Strings.isNullOrEmpty(s), &quot;Status must be set&quot;);</span>
<span class="fc" id="L352">    this.status = s;</span>
<span class="fc" id="L353">    return this;</span>
  }

  @Nullable
  public IssueStatus issueStatus() {
<span class="fc" id="L358">    return IssueStatus.of(status, resolution);</span>
  }

  @Override
  @CheckForNull
  public String resolution() {
<span class="fc" id="L364">    return resolution;</span>
  }

  public DefaultIssue setResolution(@Nullable String s) {
<span class="fc" id="L368">    this.resolution = s;</span>
<span class="fc" id="L369">    return this;</span>
  }

  public boolean isUnresolved() {
<span class="fc bfc" id="L373" title="All 2 branches covered.">    return resolution == null;</span>
  }

  @Override
  @CheckForNull
  public String assignee() {
<span class="fc" id="L379">    return assigneeUuid;</span>
  }

  public DefaultIssue setAssigneeUuid(@Nullable String s) {
<span class="fc" id="L383">    this.assigneeUuid = s;</span>
<span class="fc" id="L384">    return this;</span>
  }

  @CheckForNull
  public String assigneeLogin() {
<span class="fc" id="L389">    return assigneeLogin;</span>
  }

  public DefaultIssue setAssigneeLogin(@Nullable String s) {
<span class="fc" id="L393">    this.assigneeLogin = s;</span>
<span class="fc" id="L394">    return this;</span>
  }

  @Override
  public Date creationDate() {
<span class="fc" id="L399">    return creationDate;</span>
  }

  public DefaultIssue setCreationDate(Date d) {
<span class="fc" id="L403">    this.creationDate = truncateToSeconds(d);</span>
<span class="fc" id="L404">    return this;</span>
  }

  @Override
  @CheckForNull
  public Date updateDate() {
<span class="fc" id="L410">    return updateDate;</span>
  }

  public DefaultIssue setUpdateDate(@Nullable Date d) {
<span class="fc" id="L414">    this.updateDate = truncateToSeconds(d);</span>
<span class="fc" id="L415">    return this;</span>
  }

  @Override
  @CheckForNull
  public Date closeDate() {
<span class="fc" id="L421">    return closeDate;</span>
  }

  public DefaultIssue setCloseDate(@Nullable Date d) {
<span class="fc" id="L425">    this.closeDate = truncateToSeconds(d);</span>
<span class="fc" id="L426">    return this;</span>
  }

  @CheckForNull
  public String checksum() {
<span class="fc" id="L431">    return checksum;</span>
  }

  public DefaultIssue setChecksum(@Nullable String s) {
<span class="fc" id="L435">    this.checksum = s;</span>
<span class="fc" id="L436">    return this;</span>
  }

  @Override
  public boolean isNew() {
<span class="fc" id="L441">    return isNew;</span>
  }

  public boolean isOnChangedLine() {
<span class="fc" id="L445">    return isOnChangedLine;</span>
  }

  @Override
  public boolean isCopied() {
<span class="fc" id="L450">    return isCopied;</span>
  }

  public DefaultIssue setCopied(boolean b) {
<span class="fc" id="L454">    isCopied = b;</span>
<span class="fc" id="L455">    return this;</span>
  }

  public boolean locationsChanged() {
<span class="fc" id="L459">    return locationsChanged;</span>
  }

  public DefaultIssue setLocationsChanged(boolean locationsChanged) {
<span class="fc" id="L463">    this.locationsChanged = locationsChanged;</span>
<span class="fc" id="L464">    return this;</span>
  }

  public DefaultIssue setNew(boolean b) {
<span class="fc" id="L468">    isNew = b;</span>
<span class="fc" id="L469">    return this;</span>
  }

  public DefaultIssue setIsOnChangedLine(boolean b) {
<span class="fc" id="L473">    isOnChangedLine = b;</span>
<span class="fc" id="L474">    return this;</span>
  }

  /**
   * True when one of the following conditions is true :
   * &lt;ul&gt;
   * &lt;li&gt;the related component has been deleted or renamed&lt;/li&gt;
   * &lt;li&gt;the rule has been deleted (eg. on plugin uninstall)&lt;/li&gt;
   * &lt;li&gt;the rule has been disabled in the Quality profile&lt;/li&gt;
   * &lt;/ul&gt;
   */
  public boolean isBeingClosed() {
<span class="fc" id="L486">    return beingClosed;</span>
  }

  public DefaultIssue setBeingClosed(boolean b) {
<span class="fc" id="L490">    beingClosed = b;</span>
<span class="fc" id="L491">    return this;</span>
  }

  public boolean isOnDisabledRule() {
<span class="fc" id="L495">    return onDisabledRule;</span>
  }

  public DefaultIssue setOnDisabledRule(boolean b) {
<span class="fc" id="L499">    onDisabledRule = b;</span>
<span class="fc" id="L500">    return this;</span>
  }

  public boolean isChanged() {
<span class="fc" id="L504">    return isChanged;</span>
  }

  public DefaultIssue setChanged(boolean b) {
<span class="fc" id="L508">    isChanged = b;</span>
<span class="fc" id="L509">    return this;</span>
  }

  public boolean mustSendNotifications() {
<span class="fc" id="L513">    return sendNotifications;</span>
  }

  public DefaultIssue setSendNotifications(boolean b) {
<span class="fc" id="L517">    sendNotifications = b;</span>
<span class="fc" id="L518">    return this;</span>
  }

  @Override
  @CheckForNull
  public String authorLogin() {
<span class="fc" id="L524">    return authorLogin;</span>
  }

  public DefaultIssue setAuthorLogin(@Nullable String s) {
<span class="fc" id="L528">    this.authorLogin = s;</span>
<span class="fc" id="L529">    return this;</span>
  }

  public DefaultIssue setFieldChange(IssueChangeContext context, String field, @Nullable Serializable oldValue,
    @Nullable Serializable newValue) {
<span class="fc bfc" id="L534" title="All 2 branches covered.">    if (!Objects.equals(oldValue, newValue)) {</span>
<span class="fc bfc" id="L535" title="All 2 branches covered.">      if (currentChange == null) {</span>
<span class="fc" id="L536">        currentChange = new FieldDiffs();</span>
<span class="fc" id="L537">        currentChange.setUserUuid(context.userUuid());</span>
<span class="fc" id="L538">        currentChange.setCreationDate(context.date());</span>
<span class="fc" id="L539">        currentChange.setWebhookSource(context.getWebhookSource());</span>
<span class="fc" id="L540">        currentChange.setExternalUser(context.getExternalUser());</span>
<span class="fc" id="L541">        addChange(currentChange);</span>
      }
<span class="fc" id="L543">      currentChange.setDiff(field, oldValue, newValue);</span>
    }
<span class="fc" id="L545">    return this;</span>
  }

  public DefaultIssue setCurrentChange(FieldDiffs currentChange) {
<span class="fc" id="L549">    this.currentChange = currentChange;</span>
<span class="fc" id="L550">    addChange(currentChange);</span>
<span class="fc" id="L551">    return this;</span>
  }

  public DefaultIssue setCurrentChangeWithoutAddChange(@Nullable FieldDiffs currentChange) {
<span class="fc" id="L555">    this.currentChange = currentChange;</span>
<span class="fc" id="L556">    return this;</span>
  }

  public boolean isQuickFixAvailable() {
<span class="fc" id="L560">    return quickFixAvailable;</span>
  }

  public DefaultIssue setQuickFixAvailable(boolean quickFixAvailable) {
<span class="fc" id="L564">    this.quickFixAvailable = quickFixAvailable;</span>
<span class="fc" id="L565">    return this;</span>
  }

  public boolean isNewCodeReferenceIssue() {
<span class="fc" id="L569">    return isNewCodeReferenceIssue;</span>
  }

  public DefaultIssue setIsNewCodeReferenceIssue(boolean isNewCodeReferenceIssue) {
<span class="fc" id="L573">    this.isNewCodeReferenceIssue = isNewCodeReferenceIssue;</span>
<span class="fc" id="L574">    return this;</span>
  }

  public boolean isNoLongerNewCodeReferenceIssue() {
<span class="fc" id="L578">    return isNoLongerNewCodeReferenceIssue;</span>
  }

  public DefaultIssue setIsNoLongerNewCodeReferenceIssue(boolean isNoLongerNewCodeReferenceIssue) {
<span class="fc" id="L582">    this.isNoLongerNewCodeReferenceIssue = isNoLongerNewCodeReferenceIssue;</span>
<span class="fc" id="L583">    return this;</span>
  }

  // true if the issue is new on a reference branch,
  // but it's not persisted as such due to being created before the SQ 9.3 migration
  public boolean isToBeMigratedAsNewCodeReferenceIssue() {
<span class="fc bfc" id="L589" title="All 6 branches covered.">    return isOnChangedLine &amp;&amp; !isNewCodeReferenceIssue &amp;&amp; !isNoLongerNewCodeReferenceIssue;</span>
  }

  @CheckForNull
  public FieldDiffs currentChange() {
<span class="fc" id="L594">    return currentChange;</span>
  }

  public DefaultIssue addChange(@Nullable FieldDiffs change) {
<span class="fc bfc" id="L598" title="All 2 branches covered.">    if (change == null) {</span>
<span class="fc" id="L599">      return this;</span>
    }
<span class="fc bfc" id="L601" title="All 2 branches covered.">    if (changes == null) {</span>
<span class="fc" id="L602">      changes = new ArrayList&lt;&gt;();</span>
    }
<span class="fc" id="L604">    changes.add(change);</span>
<span class="fc" id="L605">    return this;</span>
  }

  public List&lt;FieldDiffs&gt; changes() {
<span class="fc bfc" id="L609" title="All 2 branches covered.">    if (changes == null) {</span>
<span class="fc" id="L610">      return Collections.emptyList();</span>
    }
<span class="fc" id="L612">    return ImmutableList.copyOf(changes);</span>
  }

  public DefaultIssue addComment(DefaultIssueComment comment) {
<span class="pc bpc" id="L616" title="1 of 2 branches missed.">    if (comments == null) {</span>
<span class="fc" id="L617">      comments = new ArrayList&lt;&gt;();</span>
    }
<span class="fc" id="L619">    comments.add(comment);</span>
<span class="fc" id="L620">    return this;</span>
  }

  public List&lt;DefaultIssueComment&gt; defaultIssueComments() {
<span class="fc bfc" id="L624" title="All 2 branches covered.">    if (comments == null) {</span>
<span class="fc" id="L625">      return Collections.emptyList();</span>
    }
<span class="fc" id="L627">    return ImmutableList.copyOf(comments);</span>
  }

  @CheckForNull
  public Long selectedAt() {
<span class="fc" id="L632">    return selectedAt;</span>
  }

  public DefaultIssue setSelectedAt(@Nullable Long d) {
<span class="fc" id="L636">    this.selectedAt = d;</span>
<span class="fc" id="L637">    return this;</span>
  }

  @CheckForNull
  public &lt;T&gt; T getLocations() {
<span class="fc" id="L642">    return (T) locations;</span>
  }

  public DefaultIssue setLocations(@Nullable Object locations) {
<span class="fc" id="L646">    this.locations = locations;</span>
<span class="fc" id="L647">    return this;</span>
  }

  @Override
  public boolean equals(Object o) {
<span class="fc bfc" id="L652" title="All 2 branches covered.">    if (this == o) {</span>
<span class="fc" id="L653">      return true;</span>
    }
<span class="pc bpc" id="L655" title="2 of 4 branches missed.">    if (o == null || getClass() != o.getClass()) {</span>
<span class="nc" id="L656">      return false;</span>
    }
<span class="fc" id="L658">    DefaultIssue that = (DefaultIssue) o;</span>
<span class="fc" id="L659">    return Objects.equals(key, that.key);</span>
  }

  @Override
  public int hashCode() {
<span class="fc bfc" id="L664" title="All 2 branches covered.">    return key != null ? key.hashCode() : 0;</span>
  }

  @Override
  public String toString() {
<span class="nc" id="L669">    return ToStringBuilder.reflectionToString(this, ToStringStyle.SHORT_PREFIX_STYLE);</span>
  }

  @Override
  public Set&lt;String&gt; tags() {
<span class="fc bfc" id="L674" title="All 2 branches covered.">    if (tags == null) {</span>
<span class="fc" id="L675">      return Set.of();</span>
    } else {
<span class="fc" id="L677">      return ImmutableSet.copyOf(tags);</span>
    }
  }

  public DefaultIssue setTags(Collection&lt;String&gt; tags) {
<span class="fc" id="L682">    this.tags = new LinkedHashSet&lt;&gt;(tags);</span>
<span class="fc" id="L683">    return this;</span>
  }

  @Override
  public Set&lt;String&gt; codeVariants() {
<span class="fc bfc" id="L688" title="All 2 branches covered.">    if (codeVariants == null) {</span>
<span class="fc" id="L689">      return Set.of();</span>
    } else {
<span class="fc" id="L691">      return ImmutableSet.copyOf(codeVariants);</span>
    }
  }

  public DefaultIssue setCodeVariants(Collection&lt;String&gt; codeVariants) {
<span class="fc" id="L696">    this.codeVariants = new LinkedHashSet&lt;&gt;(codeVariants);</span>
<span class="fc" id="L697">    return this;</span>
  }

  public Optional&lt;String&gt; getRuleDescriptionContextKey() {
<span class="fc" id="L701">    return Optional.ofNullable(ruleDescriptionContextKey);</span>
  }

  public DefaultIssue setRuleDescriptionContextKey(@Nullable String ruleDescriptionContextKey) {
<span class="fc" id="L705">    this.ruleDescriptionContextKey = ruleDescriptionContextKey;</span>
<span class="fc" id="L706">    return this;</span>
  }

  public Optional&lt;String&gt; getAnticipatedTransitionUuid() {
<span class="fc" id="L710">    return Optional.ofNullable(anticipatedTransitionUuid);</span>
  }

  public DefaultIssue setAnticipatedTransitionUuid(@Nullable String anticipatedTransitionUuid) {
<span class="fc" id="L714">    this.anticipatedTransitionUuid = anticipatedTransitionUuid;</span>
<span class="fc" id="L715">    return this;</span>
  }

  public DefaultIssue setCleanCodeAttribute(@Nullable CleanCodeAttribute cleanCodeAttribute) {
<span class="fc" id="L719">    this.cleanCodeAttribute = cleanCodeAttribute;</span>
<span class="fc" id="L720">    return this;</span>
  }

  public boolean isPrioritizedRule() {
<span class="fc" id="L724">    return prioritizedRule;</span>
  }

  public DefaultIssue setPrioritizedRule(boolean isBlockerRule) {
<span class="fc" id="L728">    this.prioritizedRule = isBlockerRule;</span>
<span class="fc" id="L729">    return this;</span>
  }

  public boolean isFromSonarQubeUpdate() {
<span class="fc" id="L733">    return fromSonarQubeUpdate;</span>
  }

  public DefaultIssue setFromSonarQubeUpdate(boolean fromSonarQubeUpdate) {
<span class="fc" id="L737">    this.fromSonarQubeUpdate = fromSonarQubeUpdate;</span>
<span class="fc" id="L738">    return this;</span>
  }

  @Nullable
  public CleanCodeAttribute getCleanCodeAttribute() {
<span class="fc" id="L743">    return cleanCodeAttribute;</span>
  }

  @Override
  public Integer getLine() {
<span class="fc" id="L748">    return line;</span>
  }

  @Override
  public String getMessage() {
<span class="fc" id="L753">    return message;</span>
  }

  @Override
  public String getLineHash() {
<span class="fc" id="L758">    return checksum;</span>
  }

  @Override
  public RuleKey getRuleKey() {
<span class="fc" id="L763">    return ruleKey;</span>
  }

  @Override
  public String getStatus() {
<span class="fc" id="L768">    return status;</span>
  }

  @Override
  public Date getUpdateDate() {
<span class="fc" id="L773">    return updateDate;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>