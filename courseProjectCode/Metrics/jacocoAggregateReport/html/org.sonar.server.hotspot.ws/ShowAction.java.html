<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ShowAction.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">sonarqube</a> &gt; <a href="index.source.html" class="el_package">org.sonar.server.hotspot.ws</a> &gt; <span class="el_source">ShowAction.java</span></div><h1>ShowAction.java</h1><pre class="source lang-java linenums">/*
 * SonarQube
 * Copyright (C) 2009-2025 SonarSource SA
 * mailto:info AT sonarsource DOT com
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 */
package org.sonar.server.hotspot.ws;

import java.util.HashSet;
import java.util.Map;
import java.util.Optional;
import java.util.Set;
import java.util.function.Function;
import java.util.stream.Collectors;
import java.util.stream.Stream;
import javax.annotation.CheckForNull;
import javax.annotation.Nullable;
import org.sonar.api.rule.RuleKey;
import org.sonar.api.server.ws.Change;
import org.sonar.api.server.ws.Request;
import org.sonar.api.server.ws.Response;
import org.sonar.api.server.ws.WebService;
import org.sonar.db.permission.ProjectPermission;
import org.sonar.core.util.Uuids;
import org.sonar.db.DbClient;
import org.sonar.db.DbSession;
import org.sonar.db.component.BranchDto;
import org.sonar.db.component.BranchType;
import org.sonar.db.component.ComponentDto;
import org.sonar.db.issue.IssueDto;
import org.sonar.db.project.ProjectDto;
import org.sonar.db.protobuf.DbIssues;
import org.sonar.db.protobuf.DbIssues.Locations;
import org.sonar.db.rule.RuleDescriptionSectionContextDto;
import org.sonar.db.rule.RuleDescriptionSectionDto;
import org.sonar.db.rule.RuleDto;
import org.sonar.db.user.UserDto;
import org.sonar.markdown.Markdown;
import org.sonar.server.component.ComponentFinder.ProjectAndBranch;
import org.sonar.server.exceptions.NotFoundException;
import org.sonar.server.issue.IssueChangeWSSupport;
import org.sonar.server.issue.IssueChangeWSSupport.FormattingContext;
import org.sonar.server.issue.IssueChangeWSSupport.Load;
import org.sonar.server.issue.ws.UserResponseFormatter;
import org.sonar.server.security.SecurityStandards;
import org.sonar.server.ws.MessageFormattingUtils;
import org.sonarqube.ws.Common;
import org.sonarqube.ws.Hotspots;
import org.sonarqube.ws.Hotspots.ShowWsResponse;

import static com.google.common.base.Preconditions.checkArgument;
import static com.google.common.base.Strings.emptyToNull;
import static com.google.common.base.Strings.nullToEmpty;
import static com.google.common.collect.ImmutableSet.copyOf;
import static com.google.common.collect.Sets.difference;
import static java.lang.String.format;
import static java.util.Collections.singleton;
import static java.util.Comparator.comparing;
import static java.util.Optional.ofNullable;
import static java.util.stream.Collectors.toMap;
import static org.sonar.api.server.rule.RuleDescriptionSection.RuleDescriptionSectionKeys.ASSESS_THE_PROBLEM_SECTION_KEY;
import static org.sonar.api.server.rule.RuleDescriptionSection.RuleDescriptionSectionKeys.HOW_TO_FIX_SECTION_KEY;
import static org.sonar.api.server.rule.RuleDescriptionSection.RuleDescriptionSectionKeys.ROOT_CAUSE_SECTION_KEY;
import static org.sonar.api.utils.DateUtils.formatDateTime;
import static org.sonar.db.rule.RuleDescriptionSectionDto.DEFAULT_KEY;
import static org.sonar.server.ws.WsUtils.writeProtobuf;

public class ShowAction implements HotspotsWsAction {

  private static final String PARAM_HOTSPOT_KEY = &quot;hotspot&quot;;

  private final DbClient dbClient;
  private final HotspotWsSupport hotspotWsSupport;
  private final HotspotWsResponseFormatter responseFormatter;
  private final UserResponseFormatter userFormatter;
  private final IssueChangeWSSupport issueChangeSupport;

  public ShowAction(DbClient dbClient, HotspotWsSupport hotspotWsSupport, HotspotWsResponseFormatter responseFormatter,
<span class="fc" id="L92">    UserResponseFormatter userFormatter, IssueChangeWSSupport issueChangeSupport) {</span>
<span class="fc" id="L93">    this.dbClient = dbClient;</span>
<span class="fc" id="L94">    this.hotspotWsSupport = hotspotWsSupport;</span>
<span class="fc" id="L95">    this.responseFormatter = responseFormatter;</span>
<span class="fc" id="L96">    this.userFormatter = userFormatter;</span>
<span class="fc" id="L97">    this.issueChangeSupport = issueChangeSupport;</span>
<span class="fc" id="L98">  }</span>

  @Override
  public void define(WebService.NewController controller) {
<span class="fc" id="L102">    WebService.NewAction action = controller</span>
<span class="fc" id="L103">      .createAction(&quot;show&quot;)</span>
<span class="fc" id="L104">      .setHandler(this)</span>
<span class="fc" id="L105">      .setDescription(&quot;Provides the details of a Security Hotspot.&quot;)</span>
<span class="fc" id="L106">      .setSince(&quot;8.1&quot;)</span>
<span class="fc" id="L107">      .setChangelog(</span>
        new Change(&quot;10.1&quot;, &quot;Add the 'codeVariants' response field&quot;),
        new Change(&quot;9.5&quot;, &quot;The fields rule.riskDescription, rule.fixRecommendations, rule.vulnerabilityDescription of the response are deprecated.&quot;
          + &quot; /api/rules/show endpoint should be used to fetch rule descriptions.&quot;),
        new Change(&quot;9.7&quot;, &quot;Hotspot flows in the response may contain a description and a type&quot;),
        new Change(&quot;9.8&quot;, &quot;Add message formatting to issue and locations response&quot;));

<span class="fc" id="L114">    action.createParam(PARAM_HOTSPOT_KEY)</span>
<span class="fc" id="L115">      .setDescription(&quot;Key of the Security Hotspot&quot;)</span>
<span class="fc" id="L116">      .setExampleValue(Uuids.UUID_EXAMPLE_03)</span>
<span class="fc" id="L117">      .setRequired(true);</span>

<span class="fc" id="L119">    action.setResponseExample(getClass().getResource(&quot;show-example.json&quot;));</span>
<span class="fc" id="L120">  }</span>

  @Override
  public void handle(Request request, Response response) throws Exception {
<span class="fc" id="L124">    String hotspotKey = request.mandatoryParam(PARAM_HOTSPOT_KEY);</span>
<span class="fc" id="L125">    try (DbSession dbSession = dbClient.openSession(false)) {</span>
<span class="fc" id="L126">      IssueDto hotspot = hotspotWsSupport.loadHotspot(dbSession, hotspotKey);</span>

<span class="fc" id="L128">      Components components = loadComponents(dbSession, hotspot);</span>
<span class="fc" id="L129">      Users users = loadUsers(dbSession, hotspot);</span>
<span class="fc" id="L130">      RuleDto rule = loadRule(dbSession, hotspot);</span>

<span class="fc" id="L132">      ShowWsResponse.Builder responseBuilder = ShowWsResponse.newBuilder();</span>
<span class="fc" id="L133">      formatHotspot(responseBuilder, hotspot, users);</span>
<span class="fc" id="L134">      formatComponents(components, responseBuilder);</span>
<span class="fc" id="L135">      formatRule(responseBuilder, rule);</span>
<span class="fc" id="L136">      formatTextRange(responseBuilder, hotspot);</span>
<span class="fc" id="L137">      formatFlows(dbSession, responseBuilder, hotspot);</span>
<span class="fc" id="L138">      FormattingContext formattingContext = formatChangeLogAndComments(dbSession, hotspot, users, components, responseBuilder);</span>
<span class="fc" id="L139">      formatUsers(responseBuilder, users, formattingContext);</span>

<span class="fc" id="L141">      writeProtobuf(responseBuilder.build(), request, response);</span>
    }
<span class="fc" id="L143">  }</span>

  private Users loadUsers(DbSession dbSession, IssueDto hotspot) {
<span class="fc" id="L146">    UserDto assignee = ofNullable(hotspot.getAssigneeUuid())</span>
<span class="fc" id="L147">      .map(uuid -&gt; dbClient.userDao().selectByUuid(dbSession, uuid))</span>
<span class="fc" id="L148">      .orElse(null);</span>
<span class="fc" id="L149">    UserDto author = ofNullable(hotspot.getAuthorLogin())</span>
<span class="fc" id="L150">      .map(login -&gt; {</span>
<span class="fc bfc" id="L151" title="All 4 branches covered.">        if (assignee != null &amp;&amp; assignee.getLogin().equals(login)) {</span>
<span class="fc" id="L152">          return assignee;</span>
        }
<span class="fc" id="L154">        return dbClient.userDao().selectByLogin(dbSession, login);</span>
      })
<span class="fc" id="L156">      .orElse(null);</span>
<span class="fc" id="L157">    return new Users(assignee, author);</span>
  }

  private static void formatHotspot(ShowWsResponse.Builder builder, IssueDto hotspot, Users users) {
<span class="fc" id="L161">    builder.setKey(hotspot.getKey());</span>
<span class="fc" id="L162">    ofNullable(hotspot.getStatus()).ifPresent(builder::setStatus);</span>
<span class="fc" id="L163">    ofNullable(hotspot.getResolution()).ifPresent(builder::setResolution);</span>
<span class="fc" id="L164">    ofNullable(hotspot.getLine()).ifPresent(builder::setLine);</span>
<span class="fc" id="L165">    ofNullable(emptyToNull(hotspot.getChecksum())).ifPresent(builder::setHash);</span>
<span class="fc" id="L166">    builder.setMessage(nullToEmpty(hotspot.getMessage()));</span>
<span class="fc" id="L167">    builder.addAllMessageFormattings(MessageFormattingUtils.dbMessageFormattingToWs(hotspot.parseMessageFormattings()));</span>
<span class="fc" id="L168">    builder.setCreationDate(formatDateTime(hotspot.getIssueCreationDate()));</span>
<span class="fc" id="L169">    builder.setUpdateDate(formatDateTime(hotspot.getIssueUpdateDate()));</span>
<span class="fc" id="L170">    users.getAssignee().map(UserDto::getLogin).ifPresent(builder::setAssignee);</span>
<span class="fc" id="L171">    Optional.ofNullable(hotspot.getAuthorLogin()).ifPresent(builder::setAuthor);</span>
<span class="fc" id="L172">    builder.addAllCodeVariants(hotspot.getCodeVariants());</span>
<span class="fc" id="L173">  }</span>

  private void formatComponents(Components components, ShowWsResponse.Builder responseBuilder) {
<span class="fc" id="L176">    responseBuilder</span>
<span class="fc" id="L177">      .setProject(responseFormatter.formatProject(Hotspots.Component.newBuilder(), components.getProjectDto(), components.getBranch(), components.getPullRequest()))</span>
<span class="fc" id="L178">      .setComponent(responseFormatter.formatComponent(Hotspots.Component.newBuilder(), components.getComponent(), components.getBranch(), components.getPullRequest()));</span>
<span class="fc" id="L179">    responseBuilder.setCanChangeStatus(hotspotWsSupport.canChangeStatus(components.getProjectDto()));</span>
<span class="fc" id="L180">  }</span>

  private static void formatRule(ShowWsResponse.Builder responseBuilder, RuleDto ruleDto) {
<span class="fc" id="L183">    SecurityStandards securityStandards = SecurityStandards.fromSecurityStandards(ruleDto.getSecurityStandards());</span>
<span class="fc" id="L184">    SecurityStandards.SQCategory sqCategory = securityStandards.getSqCategory();</span>

<span class="fc" id="L186">    Hotspots.Rule.Builder ruleBuilder = Hotspots.Rule.newBuilder()</span>
<span class="fc" id="L187">      .setKey(ruleDto.getKey().toString())</span>
<span class="fc" id="L188">      .setName(nullToEmpty(ruleDto.getName()))</span>
<span class="fc" id="L189">      .setSecurityCategory(sqCategory.getKey())</span>
<span class="fc" id="L190">      .setVulnerabilityProbability(sqCategory.getVulnerability().name());</span>

<span class="fc" id="L192">    Map&lt;String, String&gt; sectionKeyToContent = getSectionKeyToContent(ruleDto);</span>
<span class="fc" id="L193">    Optional.ofNullable(sectionKeyToContent.get(DEFAULT_KEY)).ifPresent(ruleBuilder::setRiskDescription);</span>
<span class="fc" id="L194">    Optional.ofNullable(sectionKeyToContent.get(ROOT_CAUSE_SECTION_KEY)).ifPresent(ruleBuilder::setRiskDescription);</span>
<span class="fc" id="L195">    Optional.ofNullable(sectionKeyToContent.get(ASSESS_THE_PROBLEM_SECTION_KEY)).ifPresent(ruleBuilder::setVulnerabilityDescription);</span>
<span class="fc" id="L196">    Optional.ofNullable(sectionKeyToContent.get(HOW_TO_FIX_SECTION_KEY)).ifPresent(ruleBuilder::setFixRecommendations);</span>
<span class="fc" id="L197">    responseBuilder.setRule(ruleBuilder.build());</span>
<span class="fc" id="L198">  }</span>

  private static Map&lt;String, String&gt; getSectionKeyToContent(RuleDto ruleDefinitionDto) {
<span class="fc" id="L201">    return ruleDefinitionDto.getRuleDescriptionSectionDtos().stream()</span>
<span class="fc" id="L202">      .sorted(comparing(r -&gt; Optional.ofNullable(r.getContext())</span>
<span class="fc" id="L203">        .map(RuleDescriptionSectionContextDto::getKey).orElse(&quot;&quot;)))</span>
<span class="fc" id="L204">      .collect(toMap(</span>
        RuleDescriptionSectionDto::getKey,
<span class="fc" id="L206">        section -&gt; getContentAndConvertToHtmlIfNecessary(ruleDefinitionDto.getDescriptionFormat(), section),</span>
<span class="fc" id="L207">        (a, b) -&gt; a));</span>
  }

  private static String getContentAndConvertToHtmlIfNecessary(@Nullable RuleDto.Format descriptionFormat, RuleDescriptionSectionDto section) {
<span class="fc bfc" id="L211" title="All 2 branches covered.">    if (RuleDto.Format.MARKDOWN.equals(descriptionFormat)) {</span>
<span class="fc" id="L212">      return Markdown.convertToHtml(section.getContent());</span>
    }
<span class="fc" id="L214">    return section.getContent();</span>
  }

  private void formatTextRange(ShowWsResponse.Builder hotspotBuilder, IssueDto hotspot) {
<span class="fc" id="L218">    responseFormatter.formatTextRange(hotspot, hotspotBuilder::setTextRange);</span>
<span class="fc" id="L219">  }</span>

  private void formatFlows(DbSession dbSession, ShowWsResponse.Builder hotspotBuilder, IssueDto hotspot) {
<span class="fc" id="L222">    DbIssues.Locations locations = hotspot.parseLocations();</span>

<span class="fc bfc" id="L224" title="All 2 branches covered.">    if (locations == null) {</span>
<span class="fc" id="L225">      return;</span>
    }

<span class="fc" id="L228">    Set&lt;String&gt; componentUuids = readComponentUuidsFromLocations(hotspot, locations);</span>
<span class="fc" id="L229">    Map&lt;String, ComponentDto&gt; componentsByUuids = loadComponents(dbSession, componentUuids);</span>

<span class="fc" id="L231">    hotspotBuilder.addAllFlows(responseFormatter.formatFlows(locations, hotspotBuilder.getComponent().getKey(), componentsByUuids));</span>
<span class="fc" id="L232">  }</span>

  private static Set&lt;String&gt; readComponentUuidsFromLocations(IssueDto hotspot, Locations locations) {
<span class="fc" id="L235">    Set&lt;String&gt; componentUuids = new HashSet&lt;&gt;();</span>
<span class="fc" id="L236">    componentUuids.add(hotspot.getComponentUuid());</span>
<span class="fc bfc" id="L237" title="All 2 branches covered.">    for (DbIssues.Flow flow : locations.getFlowList()) {</span>
<span class="fc bfc" id="L238" title="All 2 branches covered.">      for (DbIssues.Location location : flow.getLocationList()) {</span>
<span class="fc bfc" id="L239" title="All 2 branches covered.">        if (location.hasComponentId()) {</span>
<span class="fc" id="L240">          componentUuids.add(location.getComponentId());</span>
        }
<span class="fc" id="L242">      }</span>
<span class="fc" id="L243">    }</span>
<span class="fc" id="L244">    return componentUuids;</span>
  }

  private Map&lt;String, ComponentDto&gt; loadComponents(DbSession dbSession, Set&lt;String&gt; componentUuids) {
<span class="fc" id="L248">    Map&lt;String, ComponentDto&gt; componentsByUuids = dbClient.componentDao().selectSubProjectsByComponentUuids(dbSession,</span>
      componentUuids)
<span class="fc" id="L250">      .stream()</span>
<span class="fc" id="L251">      .collect(toMap(ComponentDto::uuid, Function.identity(), (componentDto, componentDto2) -&gt; componentDto2));</span>

<span class="fc" id="L253">    Set&lt;String&gt; componentUuidsToLoad = copyOf(difference(componentUuids, componentsByUuids.keySet()));</span>
<span class="fc bfc" id="L254" title="All 2 branches covered.">    if (!componentUuidsToLoad.isEmpty()) {</span>
<span class="fc" id="L255">      dbClient.componentDao().selectByUuids(dbSession, componentUuidsToLoad)</span>
<span class="fc" id="L256">        .forEach(c -&gt; componentsByUuids.put(c.uuid(), c));</span>
    }
<span class="fc" id="L258">    return componentsByUuids;</span>
  }

  private FormattingContext formatChangeLogAndComments(DbSession dbSession, IssueDto hotspot, Users users, Components components, ShowWsResponse.Builder responseBuilder) {
<span class="fc" id="L262">    Set&lt;UserDto&gt; preloadedUsers = Stream.of(users.getAssignee(), users.getAuthor())</span>
<span class="fc" id="L263">      .filter(Optional::isPresent)</span>
<span class="fc" id="L264">      .map(Optional::get)</span>
<span class="fc" id="L265">      .collect(Collectors.toSet());</span>
<span class="fc" id="L266">    FormattingContext formattingContext = issueChangeSupport</span>
<span class="fc" id="L267">      .newFormattingContext(dbSession, singleton(hotspot), Load.ALL, preloadedUsers, Set.of(components.component));</span>

<span class="fc" id="L269">    issueChangeSupport.formatChangelog(hotspot, formattingContext)</span>
<span class="fc" id="L270">      .forEach(responseBuilder::addChangelog);</span>
<span class="fc" id="L271">    issueChangeSupport.formatComments(hotspot, Common.Comment.newBuilder(), formattingContext)</span>
<span class="fc" id="L272">      .forEach(responseBuilder::addComment);</span>

<span class="fc" id="L274">    return formattingContext;</span>
  }

  private void formatUsers(ShowWsResponse.Builder responseBuilder, Users users, FormattingContext formattingContext) {
<span class="fc" id="L278">    Common.User.Builder userBuilder = Common.User.newBuilder();</span>
<span class="fc" id="L279">    Stream.concat(</span>
<span class="fc" id="L280">      Stream.of(users.getAssignee(), users.getAuthor())</span>
<span class="fc" id="L281">        .filter(Optional::isPresent)</span>
<span class="fc" id="L282">        .map(Optional::get),</span>
<span class="fc" id="L283">      formattingContext.getUsers().stream())</span>
<span class="fc" id="L284">      .distinct()</span>
<span class="fc" id="L285">      .map(user -&gt; userFormatter.formatUser(userBuilder, user))</span>
<span class="fc" id="L286">      .forEach(responseBuilder::addUsers);</span>
<span class="fc" id="L287">  }</span>

  private RuleDto loadRule(DbSession dbSession, IssueDto hotspot) {
<span class="fc" id="L290">    RuleKey ruleKey = hotspot.getRuleKey();</span>
<span class="fc" id="L291">    return dbClient.ruleDao().selectByKey(dbSession, ruleKey)</span>
<span class="pc" id="L292">      .orElseThrow(() -&gt; new NotFoundException(format(&quot;Rule '%s' does not exist&quot;, ruleKey)));</span>
  }

  private Components loadComponents(DbSession dbSession, IssueDto hotspot) {
<span class="fc" id="L296">    String componentUuid = hotspot.getComponentUuid();</span>
<span class="pc bpc" id="L297" title="1 of 2 branches missed.">    checkArgument(componentUuid != null, &quot;Hotspot '%s' has no component&quot;, hotspot.getKee());</span>

<span class="fc" id="L299">    ProjectAndBranch projectAndBranch = hotspotWsSupport.loadAndCheckBranch(dbSession, hotspot, ProjectPermission.USER);</span>
<span class="fc" id="L300">    BranchDto branch = projectAndBranch.getBranch();</span>
<span class="fc" id="L301">    ComponentDto component = dbClient.componentDao().selectByUuid(dbSession, componentUuid)</span>
<span class="pc" id="L302">      .orElseThrow(() -&gt; new NotFoundException(format(&quot;Component with uuid '%s' does not exist&quot;, componentUuid)));</span>
<span class="fc" id="L303">    return new Components(projectAndBranch.getProject(), component, branch);</span>
  }

  private static final class Components {
    private final ProjectDto project;
    private final ComponentDto component;
    private final String branch;
    private final String pullRequest;

<span class="fc" id="L312">    private Components(ProjectDto projectDto, ComponentDto component, BranchDto branch) {</span>
<span class="fc" id="L313">      this.project = projectDto;</span>
<span class="fc" id="L314">      this.component = component;</span>
<span class="fc bfc" id="L315" title="All 2 branches covered.">      if (branch.isMain()) {</span>
<span class="fc" id="L316">        this.branch = null;</span>
<span class="fc" id="L317">        this.pullRequest = null;</span>
<span class="fc bfc" id="L318" title="All 2 branches covered.">      } else if (branch.getBranchType() == BranchType.BRANCH) {</span>
<span class="fc" id="L319">        this.branch = branch.getKey();</span>
<span class="fc" id="L320">        this.pullRequest = null;</span>
      } else {
<span class="fc" id="L322">        this.branch = null;</span>
<span class="fc" id="L323">        this.pullRequest = branch.getKey();</span>
      }
<span class="fc" id="L325">    }</span>

    public ProjectDto getProjectDto() {
<span class="fc" id="L328">      return project;</span>
    }

    @CheckForNull
    public String getBranch() {
<span class="fc" id="L333">      return branch;</span>
    }

    @CheckForNull
    public String getPullRequest() {
<span class="fc" id="L338">      return pullRequest;</span>
    }

    public ComponentDto getComponent() {
<span class="fc" id="L342">      return component;</span>
    }
  }

  private static final class Users {
    @CheckForNull
    private final UserDto assignee;
    @CheckForNull
    private final UserDto author;

<span class="fc" id="L352">    private Users(@Nullable UserDto assignee, @Nullable UserDto author) {</span>
<span class="fc" id="L353">      this.assignee = assignee;</span>
<span class="fc" id="L354">      this.author = author;</span>
<span class="fc" id="L355">    }</span>

    public Optional&lt;UserDto&gt; getAssignee() {
<span class="fc" id="L358">      return ofNullable(assignee);</span>
    }

    public Optional&lt;UserDto&gt; getAuthor() {
<span class="fc" id="L362">      return ofNullable(author);</span>
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>